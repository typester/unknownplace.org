? extends 'common/base.html'

? block option_headers => sub {
  <link rel="alternate" type="application/rss+xml" href="http://unknownplace.org/memo/index.rss" />
? }

<?
   block subtitle => sub {
       Text::MicroTemplate::escape_html($entry->title . ' - ');
   };
?>

? block content => sub {
? my $permalink = '/memo/' . $entry->datetime->ymd('/') . '/' . $entry->filename . '/';
<div class="entry autopagerize_page_element">
  <h2><a href="<?= $permalink ?>"><?= $entry->title ?></a></h2>

  <div class="body">
    <?= encoded_string $entry->body ?>
  </div>

  <div class="meta">
    by typester /
    at <a href="<?= $permalink ?>"><?= $entry->datetime ?></a> /
? my $i = 0;
? for my $tag (@{ $entry->meta->{tags} || [] }) {
    <?= $i++ > 0 ? encoded_string '&middot; ' : '' ?><a href="/memo/tag/<?= $tag ?>/"><?= $tag ?></a>
? }
    / <a href="<?= $permalink ?>#disqus_thread">Comments(0)</a>
  </div>
</div>

<div id="disqus_thread"></div>

<script type="text/javascript">
    var disqus_url = location.protocol + "//" + location.host + "<?= $permalink ?>";
</script>
<script type="text/javascript" src="http://disqus.com/forums/unknownplace/embed.js"></script>

? } # endblock content


